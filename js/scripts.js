var imageGallery=function(){"use strict";function a(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function b(){document.addEventListener("keydown",function(a){var b=document.querySelector(".body-image-gallery");if(b){var c=b.querySelector(".navigation.next"),d=b.querySelector(".navigation.prev"),e=b.querySelector(".icon-cancel");39==a.keyCode?c.click():37==a.keyCode?d.click():27==a.keyCode&&e.click()}},!1)}function c(a){if(!document.querySelector(".body-image-gallery")){var b=document.createElement("section");b.classList.add("body-image-gallery","in-active"),b.innerHTML='<div class="body-image-gallery-overlay"></div><div class="body-image-gallery-container"><div class="image-gallery-sidebar"><div class="image-gallery-close"><i class="icon-cancel"></i></div><div class="image-gallery-header"></div><div class="body-image"><div class="loading in-active"></div><img class="in-active" src=""><div class="navigation prev"><i class="icon-left-arrow"></i></div><div class="navigation next"><i class="icon-right-arrow"></i></div></div><div class="sidebar-container"><div class="details-toggle"><div class="counter mobile"><span class="number"></span> / <span class="number-max"></span></div><div class="details-button"><span>RÃ©szletek</span> <i class="arrow"></i></div></div><div class="toggle-wrapper"><div class="toggle-wrapper-container"><div class="sidebar-content details"><div class="image-gallery-header"></div><div class="lead"></div><div class="counter desktop"><span><span class="number"></span> / <span class="number-max"></span></span></div></div><div class="sidebar-content thumb"><div class="thumb-container"><div class="bottom"><ul></ul></div></div></div></div></div></div></div></div>',document.body.insertBefore(b,document.body.firstChild)}}function d(a,b){if(a)var c=a.querySelector(".thumb ul");c&&A(b,function(a,b){c.innerHTML+='<li data-image-src="'+b.getAttribute("data-image-src")+'" data-thumb-id="'+parseFloat(a+1)+'"><img src="'+b.querySelector("img").getAttribute("src")+'" alt="'+b.querySelector("img").alt+'" /><span>'+b.querySelector("span").innerHTML+"</span></li>"})}function e(){document.body.classList.add("overflow-hidden")}function f(){document.body.classList.remove("overflow-hidden")}function g(){function a(){var a=document.querySelector(".body-image-gallery .thumb ul"),b=document.querySelector(".ps__rail-x"),c=document.querySelector(".ps__rail-y");if(window.matchMedia("(min-width: 768px)").matches){if(a&&!b&&!c){var d=new PerfectScrollbar(a);d.update()}}else a&&b&&c&&(a.removeChild(b),a.removeChild(c));a&&(a.scrollTop=0)}a(),window.addEventListener("resize",function(){a()},!1)}function h(a){A(a,function(a,b){b.setAttribute("data-user-id",parseFloat(a+1))})}function i(a){a&&(a.classList.remove("in-active"),setTimeout(function(){a.classList.add("active")},50),e())}function j(a){function b(){c.classList.remove("active"),setTimeout(function(){document.body.removeChild(c)},550),f();var b=a.querySelector("ul.user-image-gallery-container li.active");b&&b.classList.remove("active")}var c=document.querySelector(".body-image-gallery");if(c&&a){var d=c.querySelector(".icon-cancel");d.addEventListener("click",function(){b()},!1)}}function k(a){a&&(a.classList.remove("in-active"),setTimeout(function(){a.classList.add("active")},50))}function l(a){a&&(setTimeout(function(){a.classList.remove("active")},50),setTimeout(function(){a.classList.add("in-active")},100))}function m(a,b,c){var d=c.querySelector("img"),e=c.querySelector("span");d&&e&&(A(a,function(a,b){b.innerHTML=d.alt}),b.innerHTML=e.innerHTML)}function n(a,b,c,d,e){a.classList.add("in-active"),setTimeout(function(){e?d?a.setAttribute("src",c[0].getAttribute("data-image-src")):a.setAttribute("src",c.getAttribute("data-image-src")):d?a.setAttribute("src",c[c.length-1].getAttribute("data-image-src")):a.setAttribute("src",c.getAttribute("data-image-src")),k(b)},350),a.addEventListener("load",function(){l(b),a.classList.remove("in-active")},!1)}function o(a,b,c,d,e){if(v){v=!1,setTimeout(function(){v=!0},750);var f=c.querySelector("ul.user-image-gallery-container li.active"),g=d.querySelectorAll(".thumb ul li"),h=d.querySelectorAll(".counter span.number"),i=d.querySelectorAll(".image-gallery-header"),j=d.querySelector(".lead"),k=parseFloat(f.getAttribute("data-user-id"));if(null!=k)var l=k+1;A(h,function(a,b){b.innerHTML=l}),l<=a.length?(A(a,function(a,c){c.classList.remove("active"),parseFloat(c.getAttribute("data-user-id"))==l&&(c.classList.add("active"),n(b,e,c,!1,!0),m(i,j,c))}),A(g,function(a,b){b.classList.remove("active"),parseFloat(b.getAttribute("data-thumb-id"))==l&&b.classList.add("active")})):(a[a.length-1].classList.remove("active"),a[0].classList.add("active"),g[g.length-1].classList.remove("active"),g[0].classList.add("active"),A(h,function(a,b){b.innerHTML="1"}),n(b,e,a,!0,!0),m(i,j,a[0]))}}function p(a,b,c,d,e){if(v){v=!1,setTimeout(function(){v=!0},750);var f=c.querySelector("ul.user-image-gallery-container li.active"),g=d.querySelectorAll(".thumb ul li"),h=d.querySelectorAll(".counter span.number"),i=d.querySelectorAll(".image-gallery-header"),j=d.querySelector(".lead"),k=parseFloat(f.getAttribute("data-user-id"));if(null!=k)var l=k-1;A(h,function(a,b){b.innerHTML=l}),l>0?(A(a,function(a,c){c.classList.remove("active"),parseFloat(c.getAttribute("data-user-id"))==l&&(c.classList.add("active"),n(b,e,c,!1,!1),m(i,j,c))}),A(g,function(a,b){b.classList.remove("active"),parseFloat(b.getAttribute("data-thumb-id"))==l&&b.classList.add("active")})):(a[a.length-1].classList.add("active"),a[0].classList.remove("active"),g[g.length-1].classList.add("active"),g[0].classList.remove("active"),A(h,function(b,c){c.innerHTML=""+a.length}),n(b,e,a,!0,!1),m(i,j,a[a.length-1]))}}function q(a){var b=document.querySelector(".body-image-gallery");if(b){var c=b.querySelector(".body-image"),d=c.querySelector(".loading"),e=c.querySelector(".body-image img"),f=b.querySelectorAll(".thumb ul li"),g=b.querySelectorAll(".image-gallery-header"),h=b.querySelector(".lead");A(f,function(c,i){i.addEventListener("click",function(){if(v){v=!1,setTimeout(function(){v=!0},750);var c=this;A(f,function(a,b){b.classList.remove("active")}),A(a,function(a,b){b.classList.remove("active"),parseFloat(c.getAttribute("data-thumb-id"))==parseFloat(b.getAttribute("data-user-id"))&&b.classList.add("active")}),c.classList.add("active");var i=b.querySelectorAll("span.number");A(i,function(a,b){b.innerHTML=c.getAttribute("data-thumb-id")}),n(e,d,c,!1,!0),m(g,h,c)}},!1)})}}function r(a,b){var c=document.querySelector(".body-image-gallery");if(c){var d=c.querySelector(".body-image"),e=d.querySelector(".loading"),f=d.querySelector(".body-image img"),g=c.querySelector(".navigation.next"),h=c.querySelector(".navigation.prev");g.addEventListener("click",function(){o(a,f,b,c,e)},!1),h.addEventListener("click",function(){p(a,f,b,c,e)},!1);var i=0,j=0,k=0;d&&(d.addEventListener("touchstart",function(a){var b=a.changedTouches[0];i=parseInt(b.clientX),a.preventDefault()},!1),d.addEventListener("touchend",function(d){if(0==d.touches.length){var g=d.changedTouches[0],h=parseInt(g.clientX)-i;h>70?p(a,f,b,c,e):-70>h&&o(a,f,b,c,e)}d.preventDefault()},!1),d.addEventListener("mousedown",function(g){j=event.clientX,g.preventDefault(),d.addEventListener("mouseup",function(d){k=j-event.clientX,k>100?o(a,f,b,c,e):-100>k&&p(a,f,b,c,e),d.preventDefault()},!1)},!1))}}function s(){if(window.matchMedia("(max-width: 768px)").matches){var a=document.querySelector(".body-image-gallery");if(a){var b=a.querySelector(".sidebar-container");if(b){var c=b.querySelector(".details-toggle .details-button");c.addEventListener("click",function(){var a=b.querySelector(".toggle-wrapper"),d=a.querySelector(".toggle-wrapper-container");d.classList.contains("active")?(d.classList.remove("active"),c.classList.remove("active")):(d.classList.add("active"),c.classList.add("active"))},!1)}}}}function t(a,b){A(a,function(e,f){f.addEventListener("click",function(){h(a),c(a),j(b),r(a,b),s();var e=document.querySelector(".body-image-gallery");if(e){var f=e.querySelector(".body-image"),n=f.querySelector(".loading"),o=f.querySelector(".body-image img"),p=e.querySelectorAll(".image-gallery-header"),t=e.querySelector(".lead");d(e,a);var u=this,v=u.getAttribute("data-image-src"),w=parseFloat(u.getAttribute("data-user-id"));u.classList.add("active");var x=e.querySelectorAll(".thumb ul li");o.setAttribute("src",v),o.classList.remove("in-active"),k(n),o.addEventListener("load",function(){l(n)},!1),A(x,function(a,b){parseFloat(b.getAttribute("data-thumb-id"))==w&&b.classList.add("active")});var y=e.querySelectorAll("span.number");A(y,function(a,b){b.innerHTML=w});var z=e.querySelectorAll("span.number-max");A(z,function(b,c){c.innerHTML=a.length}),m(p,t,u),i(e),g(),q(a)}},!1)})}function u(){var a=document.querySelector("#"+config.render);if(a){var b=a.querySelectorAll("ul.user-image-gallery-container li");t(b,a)}}var v=!0;if(a())try{for(var w in document.styleSheets){var x=document.styleSheets[w];if(x.rules)for(var y=x.rules.length-1;y>=0;y--)x.rules[y].selectorText&&x.rules[y].selectorText.match(":hover")&&x.deleteRule(y)}}catch(z){}var A=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])};return{app:u,keydown:b}}();window.addEventListener("load",function(){imageGallery.keydown()},!1);