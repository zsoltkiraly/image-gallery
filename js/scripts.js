var imageGallery=function(){"use strict";function a(){document.addEventListener("keydown",function(a){var b=document.querySelector(".body-image-gallery");if(b){var c=b.querySelector(".navigation.next"),d=b.querySelector(".navigation.prev"),e=b.querySelector(".icon-cancel");39==a.keyCode?c.click():37==a.keyCode?d.click():27==a.keyCode&&e.click()}},!1)}function b(a){var b="";if(1==a.length&&(b="in-active"),!document.querySelector(".body-image-gallery")){var c=document.createElement("section");c.classList.add("body-image-gallery","in-active"),c.innerHTML='<div class="body-image-gallery-overlay"></div><div class="body-image-gallery-container"><div class="image-gallery-sidebar"><div class="image-gallery-close"><i class="icon-cancel"></i></div><div class="image-gallery-header"></div><div class="body-image"><div class="loading in-active"></div><img class="in-active" src=""><div class="navigation prev '+b+'"><i class="icon-left-arrow"></i></div><div class="navigation next '+b+'"><i class="icon-right-arrow"></i></div></div><div class="sidebar-container"><div class="details-toggle"><div class="counter mobile"><span class="number"></span> / <span class="number-max"></span></div><div class="details-button"><span>RÃ©szletek</span> <i class="arrow"></i></div></div><div class="toggle-wrapper"><div class="toggle-wrapper-container"><div class="sidebar-content details"><div class="image-gallery-header"></div><div class="lead"></div><div class="counter desktop"><span><span class="number"></span> / <span class="number-max"></span></span></div></div><div class="sidebar-content thumb"><div class="thumb-container"><div class="bottom"><ul></ul></div></div></div></div></div></div></div></div>',document.body.insertBefore(c,document.body.firstChild)}}function c(a,b){if(a)var c=a.querySelector(".thumb ul");c&&y(b,function(a,b){c.innerHTML+='<li data-image-src="'+b.getAttribute("data-image-src")+'" data-thumb-id="'+parseFloat(a+1)+'"><img src="'+b.querySelector("img").getAttribute("src")+'" alt="'+b.querySelector("img").alt+'" /><span>'+b.querySelector("span").innerHTML+"</span></li>"})}function d(){var a;return a=window.innerHeight<window.innerWidth||90===window.orientation||-90===window.orientation?!0:!1}function e(a){d()?a.classList.add("landscape"):a.classList.remove("landscape")}function f(){window.matchMedia("(min-width: 992px)").matches?document.documentElement.clientWidth<window.innerWidth&&document.body.classList.add("overflow-hidden"):document.body.classList.add("overflow-hidden")}function g(){document.body.classList.remove("overflow-hidden")}function h(){function a(){var a=document.querySelector(".ps__rail-x"),d=document.querySelector(".ps__rail-y");window.matchMedia("(min-width: 769px)").matches?(!b||a||d||(c=new PerfectScrollbar(b)),c.update()):c.destroy(),b&&(b.scrollTop=0)}var b=document.querySelector(".body-image-gallery .thumb ul"),c=new PerfectScrollbar(b);a(),window.addEventListener("resize",function(){a()},!1)}function i(a){y(a,function(a,b){b.setAttribute("data-user-id",parseFloat(a+1))})}function j(a){a&&(a.classList.remove("in-active"),setTimeout(function(){a.classList.add("active")},50),setTimeout(function(){f()},550))}function k(a){function b(){c.classList.remove("active"),setTimeout(function(){document.body.removeChild(c)},550),g();var b=a.querySelector("ul.user-image-gallery-container li.active");b&&b.classList.remove("active"),document.documentElement.scrollTop=document.body.scrollTop=document.body.getAttribute("data-scroll"),document.body.removeAttribute("data-scroll")}var c=document.querySelector(".body-image-gallery"),d=!0;if(c&&a){var e=c.querySelector(".icon-cancel");e.addEventListener("click",function(){d&&(b(),d=!1)},!1)}}function l(a){a&&(a.classList.remove("in-active"),setTimeout(function(){a.classList.add("active")},50))}function m(a){a&&(setTimeout(function(){a.classList.remove("active")},50),setTimeout(function(){a.classList.add("in-active")},100))}function n(a,b,c){var d=c.querySelector("img"),e=c.querySelector("span");d&&e&&(y(a,function(a,b){b.innerHTML=e.innerHTML}),b.innerHTML=d.alt)}function o(a){a.addEventListener("load",function(){var b=a.naturalWidth,c=a.naturalHeight;c>b?a.classList.add("portrait"):a.classList.remove("portrait")},!1)}function p(a,b,c,d,e){a.classList.add("in-active"),o(a),setTimeout(function(){e?d?a.setAttribute("src",c[0].getAttribute("data-image-src")):a.setAttribute("src",c.getAttribute("data-image-src")):d?a.setAttribute("src",c[c.length-1].getAttribute("data-image-src")):a.setAttribute("src",c.getAttribute("data-image-src")),l(b)},350),a.addEventListener("load",function(){m(b),a.classList.remove("in-active")},!1)}function q(a,b,c,d,e){if(x){x=!1,setTimeout(function(){x=!0},750);var f=c.querySelector("ul.user-image-gallery-container li.active"),g=d.querySelectorAll(".thumb ul li"),h=d.querySelectorAll(".counter span.number"),i=d.querySelectorAll(".image-gallery-header"),j=d.querySelector(".lead"),k=parseFloat(f.getAttribute("data-user-id"));if(null!=k)var l=k+1;y(h,function(a,b){b.innerHTML=l}),l<=a.length?(y(a,function(a,c){c.classList.remove("active"),parseFloat(c.getAttribute("data-user-id"))==l&&(c.classList.add("active"),p(b,e,c,!1,!0),n(i,j,c))}),y(g,function(a,b){b.classList.remove("active"),parseFloat(b.getAttribute("data-thumb-id"))==l&&b.classList.add("active")})):(a[a.length-1].classList.remove("active"),a[0].classList.add("active"),g[g.length-1].classList.remove("active"),g[0].classList.add("active"),y(h,function(a,b){b.innerHTML="1"}),p(b,e,a,!0,!0),n(i,j,a[0]))}}function r(a,b,c,d,e){if(x){x=!1,setTimeout(function(){x=!0},750);var f=c.querySelector("ul.user-image-gallery-container li.active"),g=d.querySelectorAll(".thumb ul li"),h=d.querySelectorAll(".counter span.number"),i=d.querySelectorAll(".image-gallery-header"),j=d.querySelector(".lead"),k=parseFloat(f.getAttribute("data-user-id"));if(null!=k)var l=k-1;y(h,function(a,b){b.innerHTML=l}),l>0?(y(a,function(a,c){c.classList.remove("active"),parseFloat(c.getAttribute("data-user-id"))==l&&(c.classList.add("active"),p(b,e,c,!1,!1),n(i,j,c))}),y(g,function(a,b){b.classList.remove("active"),parseFloat(b.getAttribute("data-thumb-id"))==l&&b.classList.add("active")})):(a[a.length-1].classList.add("active"),a[0].classList.remove("active"),g[g.length-1].classList.add("active"),g[0].classList.remove("active"),y(h,function(b,c){c.innerHTML=""+a.length}),p(b,e,a,!0,!1),n(i,j,a[a.length-1]))}}function s(a){var b=document.querySelector(".body-image-gallery");if(b){var c=b.querySelector(".body-image"),d=c.querySelector(".loading"),e=c.querySelector(".body-image img"),f=b.querySelectorAll(".thumb ul li"),g=b.querySelectorAll(".image-gallery-header"),h=b.querySelector(".lead");y(f,function(c,i){i.addEventListener("click",function(){if(f.length>1&&x){x=!1,setTimeout(function(){x=!0},750);var c=this;y(f,function(a,b){b.classList.remove("active")}),y(a,function(a,b){b.classList.remove("active"),parseFloat(c.getAttribute("data-thumb-id"))==parseFloat(b.getAttribute("data-user-id"))&&b.classList.add("active")}),c.classList.add("active");var i=b.querySelectorAll("span.number");y(i,function(a,b){b.innerHTML=c.getAttribute("data-thumb-id")}),p(e,d,c,!1,!0),n(g,h,c)}},!1)})}}function t(a,b){var c=document.querySelector(".body-image-gallery");if(c){var d=c.querySelector(".body-image"),e=d.querySelector(".loading"),f=d.querySelector(".body-image img"),g=c.querySelector(".navigation.next"),h=c.querySelector(".navigation.prev");g.addEventListener("click",function(){a.length>1&&q(a,f,b,c,e)},!1),h.addEventListener("click",function(){a.length>1&&r(a,f,b,c,e)},!1);var i=0,j=0,k=0;d&&(d.addEventListener("touchstart",function(b){if(a.length>1){var c=b.changedTouches[0];i=parseInt(c.clientX)}},!1),d.addEventListener("touchend",function(d){if(a.length>1&&0==d.touches.length){var g=d.changedTouches[0],h=parseInt(g.clientX)-i;h>70?r(a,f,b,c,e):-70>h&&q(a,f,b,c,e)}},!1),window.matchMedia("(min-width: 768px)").matches&&a.length>1&&d.addEventListener("mousedown",function(g){j=g.clientX,g.preventDefault(),d.addEventListener("mouseup",function(d){k=j-d.clientX,k>100?q(a,f,b,c,e):-100>k&&r(a,f,b,c,e),d.preventDefault()},!1)},!1))}}function u(){var a=document.querySelector(".body-image-gallery");if(a){var b=a.querySelector(".sidebar-container");if(b){var c=b.querySelector(".details-toggle .details-button");c.addEventListener("click",function(){var a=b.querySelector(".toggle-wrapper"),d=a.querySelector(".toggle-wrapper-container");d.classList.contains("active")?(c.classList.remove("active"),d.classList.remove("active"),setTimeout(function(){d.classList.remove("block")},250)):(d.classList.add("block"),setTimeout(function(){c.classList.add("active"),d.classList.add("active")},50))},!1)}}}function v(a,d){y(a,function(f,g){g.addEventListener("click",function(){function f(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}document.body.setAttribute("data-scroll",window.pageYOffset),i(a),b(a),k(d),t(a,d),u();var g=document.querySelector(".body-image-gallery");if(g){var p=g.querySelector(".body-image"),q=p.querySelector(".loading"),r=p.querySelector(".body-image img"),v=g.querySelectorAll(".image-gallery-header"),w=g.querySelector(".lead");c(g,a);var x=this,z=x.getAttribute("data-image-src"),A=parseFloat(x.getAttribute("data-user-id"));x.classList.add("active");var B=g.querySelectorAll(".thumb ul li");r.setAttribute("src",z),r.classList.remove("in-active"),o(r),l(q),r.addEventListener("load",function(){m(q)},!1),y(B,function(a,b){parseFloat(b.getAttribute("data-thumb-id"))==A&&b.classList.add("active")});var C=g.querySelectorAll("span.number");y(C,function(a,b){b.innerHTML=A});var D=g.querySelectorAll("span.number-max");y(D,function(b,c){c.innerHTML=a.length}),n(v,w,x),j(g),h(),s(a),e(g),window.addEventListener("orientationchange",function(){e(g)},!1),window.addEventListener("resize",function(){e(g)},!1)}if(f())try{for(var E in document.styleSheets){var F=document.styleSheets[E];if(F.rules)for(var G=F.rules.length-1;G>=0;G--)F.rules[G].selectorText&&F.rules[G].selectorText.match(":hover")&&F.deleteRule(G)}}catch(H){}},!1)})}function w(){var a=document.querySelector("#"+config.render);if(a){var b=a.querySelectorAll("ul.user-image-gallery-container li");v(b,a)}}var x=!0,y=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])};return{app:w,keydown:a}}();window.addEventListener("load",function(){imageGallery.keydown()},!1);